<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
  <title>Switchboard | Team Status Dashboard</title>
  <meta name="description" content="Switchboard gives sales teams live visibility and clean handoffs.">
  <meta name="theme-color" content="#0053CF">
  
  <!-- Premium Font Stack -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=Manrope:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  
  <style>
    /* ===== CORE RESET & VARIABLES ===== */
    :root {
      --top-cover: #020617;
      color-scheme: light dark;
      --mth-blue: #0053CF;
      --mth-blue-light: #3b82f6;
      --mth-cyan: #38bdf8;
      --mth-green: #22c55e;
      --mth-red: #ef4444;
      --mth-yellow: #facc15;
      --mth-purple: #8b5cf6;
      --mth-slate: #64748b;
      --mth-slate-dark: #1e293b;
      
      /* Premium gradients */
      --gradient-primary: linear-gradient(135deg, #0053CF 0%, #3b82f6 50%, #38bdf8 100%);
      --gradient-card: linear-gradient(145deg, rgba(255, 255, 255, 0.12) 0%, rgba(255, 255, 255, 0.04) 100%);
      --gradient-glass: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%);
      
      /* Shadows */
      --shadow-card: 0 24px 48px rgba(0, 0, 0, 0.25), 0 0 0 1px rgba(255, 255, 255, 0.08);
      --shadow-button: 0 12px 24px rgba(0, 83, 207, 0.25), 0 0 0 1px rgba(255, 255, 255, 0.1);
      --shadow-toast: 0 24px 48px rgba(0, 0, 0, 0.35), 0 0 0 1px rgba(255, 255, 255, 0.12);
      
      /* Animations */
      --transition-smooth: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      --transition-spring: all 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
      
      /* Spacing */
      --radius-lg: 24px;
      --radius-md: 20px;
      --radius-sm: 16px;
    }

    * {
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
      margin: 0;
      padding: 0;
    }

    /* ===== BASE STYLES ===== */
    body {
      --top-cover: #020617;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
      margin: 0;
      padding: 0;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      background:
        linear-gradient(180deg, #020617 0px, #020617 96px, rgba(2, 6, 23, 0) 240px),
        radial-gradient(ellipse at top, rgba(56, 189, 248, 0.12), transparent 70%),
        radial-gradient(ellipse at bottom, rgba(0, 83, 207, 0.10), transparent 70%),
        #020617;
      color: #f9fafb;
      position: relative;
      overflow-x: hidden;
      
      overscroll-behavior-y: none;
      transition: var(--transition-smooth);
      font-weight: 500;
      letter-spacing: -0.01em;
    }

    /* ===== iOS TOP BLEED COVER (FIX) ===== */
    html::before{
      content:'';
      position:fixed;
      top:0;
      left:0;
      right:0;
      height: env(safe-area-inset-top, 0);
      background: var(--top-cover);
      z-index: 9998;
      pointer-events:none;
    }

    html, body{
      overscroll-behavior-y: none;
    }

    /* Light Theme */
    body.light {
      --top-cover: #f8fafc;
      background:
        linear-gradient(180deg, #f8fafc 0px, #f8fafc 96px, rgba(248, 250, 252, 0) 240px),
        radial-gradient(ellipse at top, rgba(2, 132, 199, 0.08), transparent 70%),
        radial-gradient(ellipse at bottom, rgba(2, 132, 199, 0.05), transparent 70%),
        linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
      color: #0f172a;
    }
/* Custom Scrollbar */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }

    ::-webkit-scrollbar-track {
      background: rgba(56, 189, 248, 0.05);
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb {
      background: var(--gradient-primary);
      border-radius: 4px;
      border: 2px solid transparent;
      background-clip: content-box;
    }

    body.light ::-webkit-scrollbar-thumb {
      background: linear-gradient(135deg, var(--mth-blue), var(--mth-cyan));
      background-clip: content-box;
    }

    /* ===== CONTAINER & LAYOUT ===== */
    .container {
      width: 100%;
      max-width: 480px;
      padding: calc(24px + env(safe-area-inset-top, 0) + 16px) 20px calc(32px + env(safe-area-inset-bottom, 0));
      position: relative;
      z-index: 1;
      animation: containerSlideUp 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) both;
    }

    /* Closer view: reduce top padding (removes the big empty space above header) */
    body.role-closer .container {
      padding-top: calc(12px + env(safe-area-inset-top, 0));
    }


    @keyframes containerSlideUp {
      from { 
        opacity: 0;
        transform: translateY(40px) scale(0.98);
      }
      to { 
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    /* ===== HEADER CARD (PREMIUM) ===== */
    .header-card {
      background: linear-gradient(145deg, 
        rgba(15, 23, 42, 0.92) 0%,
        rgba(2, 6, 23, 0.96) 100%
      );
      backdrop-filter: blur(32px) saturate(180%);
      border: 1px solid transparent;
      background-clip: padding-box;
      position: relative;
      border-radius: var(--radius-lg);
      padding: 24px;
      margin-bottom: 32px;
      box-shadow: var(--shadow-card);
      position: sticky;
      top: env(safe-area-inset-top, 0);
      z-index: 500;
      animation: none;
      transition: var(--transition-smooth);
    }

    @keyframes headerFloat {
      0% { transform: translateY(0); }
      100% { transform: translateY(-4px); }
    }

    .header-card::before {
      content: '';
      position: absolute;
      inset: 0;
      border-radius: var(--radius-lg);
      padding: 1px;
      background: linear-gradient(135deg, 
        rgba(56, 189, 248, 0.3) 0%,
        rgba(0, 83, 207, 0.1) 50%,
        rgba(56, 189, 248, 0.3) 100%
      );
      -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
      mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
      -webkit-mask-composite: xor;
      mask-composite: exclude;
      pointer-events: none;
    }

    body.light .header-card {
      background: linear-gradient(145deg, 
        rgba(255, 255, 255, 0.98) 0%,
        rgba(241, 245, 249, 0.96) 100%
      );
    }

    body.light .header-card::before {
      background: linear-gradient(135deg, 
        rgba(2, 132, 199, 0.2) 0%,
        rgba(0, 83, 207, 0.1) 50%,
        rgba(2, 132, 199, 0.2) 100%
      );
    }

    .header-card.is-scrolled {
      box-shadow: 0 16px 32px rgba(0, 0, 0, 0.3), 0 0 0 1px rgba(255, 255, 255, 0.08);
    }

    /* Header Content */
    .header-content {
      display: flex;
      align-items: center;
      gap: 20px;
    }

    /* Premium Logo */
    .brand-logo {
      width: 56px;
      height: 56px;
      border-radius: 18px;
      background: var(--gradient-primary);
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      box-shadow: 
        0 16px 32px rgba(0, 83, 207, 0.3),
        0 0 32px rgba(56, 189, 248, 0.4),
        inset 0 1px 0 rgba(255, 255, 255, 0.3);
      animation: logoGlow 2s ease-in-out infinite alternate;
      flex-shrink: 0;
    }

    @keyframes logoGlow {
      0% { 
        box-shadow: 
          0 16px 32px rgba(0, 83, 207, 0.3),
          0 0 32px rgba(56, 189, 248, 0.4),
          inset 0 1px 0 rgba(255, 255, 255, 0.3);
      }
      100% { 
        box-shadow: 
          0 16px 32px rgba(0, 83, 207, 0.4),
          0 0 48px rgba(56, 189, 248, 0.6),
          inset 0 1px 0 rgba(255, 255, 255, 0.4);
      }
    }

    .brand-logo::after {
      content: '';
      position: absolute;
      inset: 0;
      border-radius: 18px;
      background: linear-gradient(
        120deg,
        transparent 30%,
        rgba(255, 255, 255, 0.3),
        transparent 70%
      );
      opacity: 0.5;
    }

    .logo-svg {
      width: 32px;
      height: 32px;
      filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
    }

    .title-section {
      flex: 1;
    }


    .header-actions {
      display: flex;
      align-items: center;
      gap: 12px;
      flex-shrink: 0;
    }
    .title-row {
      display: flex;
      align-items: center;
      gap: 16px;
      margin-bottom: 8px;
    }

    h1 {
      font-family: 'Manrope', sans-serif;
      font-size: 26px;
      font-weight: 800;
      margin: 0;
      letter-spacing: -0.02em;
      background: linear-gradient(135deg, #ffffff 0%, #d1d5db 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    body.light h1 {
      background: linear-gradient(135deg, var(--mth-blue) 0%, var(--mth-cyan) 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .tag-pro {
      font-family: 'Inter', sans-serif;
      font-size: 11px;
      font-weight: 900;
      padding: 6px 14px;
      border-radius: 12px;
      background: linear-gradient(135deg, 
        rgba(0, 83, 207, 0.25) 0%,
        rgba(56, 189, 248, 0.2) 100%
      );
      border: 1px solid rgba(56, 189, 248, 0.4);
      color: #e0f2fe;
      letter-spacing: 0.08em;
      backdrop-filter: blur(12px);
      text-transform: uppercase;
      box-shadow: 0 4px 12px rgba(0, 83, 207, 0.2);
    }

    body.light .tag-pro {
      background: linear-gradient(135deg, 
        rgba(0, 83, 207, 0.15) 0%,
        rgba(56, 189, 248, 0.12) 100%
      );
      border: 1px solid rgba(2, 132, 199, 0.4);
      color: #075985;
    }

    .subtitle {
      font-size: 13px;
      color: #94a3b8;
      margin: 0;
      line-height: 1.6;
      font-weight: 500;
    }

    body.light .subtitle {
      color: #64748b;
    }

    /* Logout Button */
    .header-logout {
      width: 48px;
      height: 48px;
      border-radius: 16px;
      border: 1px solid rgba(56, 189, 248, 0.25);
      background: linear-gradient(135deg, 
        rgba(2, 6, 23, 0.4) 0%,
        rgba(2, 6, 23, 0.6) 100%
      );
      color: #e5e7eb;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      backdrop-filter: blur(12px);
      transition: var(--transition-smooth);
      box-shadow: 0 12px 28px rgba(0, 0, 0, 0.3);
      flex-shrink: 0;
    }

    .header-logout svg {
      width: 20px;
      height: 20px;
      display: block;
    }

    .header-logout:hover {
      transform: translateY(-2px);
      border-color: rgba(56, 189, 248, 0.5);
      background: linear-gradient(135deg, 
        rgba(2, 6, 23, 0.6) 0%,
        rgba(2, 6, 23, 0.8) 100%
      );
      box-shadow: 0 16px 32px rgba(0, 0, 0, 0.4);
    }

    body.light .header-logout {
      background: linear-gradient(135deg, 
        rgba(255, 255, 255, 0.9) 0%,
        rgba(241, 245, 249, 0.95) 100%
      );
      color: #0f172a;
      border: 1px solid rgba(2, 132, 199, 0.25);
      box-shadow: 0 12px 28px rgba(2, 132, 199, 0.15);
    }

    body.light .header-logout:hover {
      border-color: rgba(2, 132, 199, 0.5);
      background: linear-gradient(135deg, 
        rgba(255, 255, 255, 1) 0%,
        rgba(241, 245, 249, 1) 100%
      );
    }

    /* Wordle Button (Closer-only) */
    .wordle-btn{
      display: none;
      width: 48px;
      height: 48px;
      border-radius: 16px;
      border: 1px solid rgba(56, 189, 248, 0.25);
      background: linear-gradient(135deg, rgba(2, 6, 23, 0.4) 0%, rgba(2, 6, 23, 0.6) 100%);
      color: #e5e7eb;
      text-decoration: none;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      backdrop-filter: blur(12px);
      transition: var(--transition-smooth);
      box-shadow: 0 12px 28px rgba(0, 0, 0, 0.3);
      flex-shrink: 0;
    }
    .wordle-btn svg {
      width: 20px;
      height: 20px;
      display: block;
    }
    body.role-closer .wordle-btn{
      display: inline-flex;
    }
    .wordle-btn:hover {
      transform: translateY(-2px);
      border-color: rgba(56, 189, 248, 0.5);
      background: linear-gradient(135deg, rgba(2, 6, 23, 0.6) 0%, rgba(2, 6, 23, 0.8) 100%);
      box-shadow: 0 16px 32px rgba(0, 0, 0, 0.4);
    }
    body.light .wordle-btn{
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.9) 0%, rgba(241, 245, 249, 0.95) 100%);
      color: #0f172a;
      border: 1px solid rgba(2, 132, 199, 0.25);
      box-shadow: 0 12px 28px rgba(2, 132, 199, 0.15);
    }
    body.light .wordle-btn:hover{
      border-color: rgba(2, 132, 199, 0.5);
      background: linear-gradient(135deg, rgba(255, 255, 255, 1) 0%, rgba(241, 245, 249, 1) 100%);
    }

    /* ===== TOOLS ROW ===== */
    .tools-row {
      display: flex;
      gap: 16px;
      align-items: center;
      margin: -8px 0 24px;
    }

    .search-wrap {
      flex: 1;
      position: relative;
    }

    .search-input {
      width: 100%;
      height: 52px;
      border-radius: var(--radius-sm);
      padding: 0 20px 0 48px;
      border: 1px solid rgba(56, 189, 248, 0.2);
      background: linear-gradient(135deg, 
        rgba(2, 6, 23, 0.4) 0%,
        rgba(2, 6, 23, 0.6) 100%
      );
      color: #ffffff;
      font-size: 14px;
      font-family: 'Inter', sans-serif;
      outline: none;
      backdrop-filter: blur(16px);
      transition: var(--transition-smooth);
    }

    .search-input:focus {
      border-color: rgba(56, 189, 248, 0.5);
      box-shadow: 0 0 0 3px rgba(56, 189, 248, 0.15);
      background: linear-gradient(135deg, 
        rgba(2, 6, 23, 0.6) 0%,
        rgba(2, 6, 23, 0.8) 100%
      );
    }

    body.light .search-input {
      background: linear-gradient(135deg, 
        rgba(255, 255, 255, 0.85) 0%,
        rgba(241, 245, 249, 0.95) 100%
      );
      color: #0f172a;
      border: 1px solid rgba(2, 132, 199, 0.2);
    }

    body.light .search-input:focus {
      border-color: rgba(2, 132, 199, 0.5);
      box-shadow: 0 0 0 3px rgba(2, 132, 199, 0.1);
      background: linear-gradient(135deg, 
        rgba(255, 255, 255, 1) 0%,
        rgba(241, 245, 249, 1) 100%
      );
    }

    .search-icon {
      position: absolute;
      left: 20px;
      top: 50%;
      transform: translateY(-50%);
      color: #94a3b8;
      pointer-events: none;
    }

    .all-offline-btn {
      height: 52px;
      padding: 0 20px;
      border-radius: var(--radius-sm);
      border: 1px solid rgba(148, 163, 184, 0.25);
      background: linear-gradient(135deg, 
        rgba(2, 6, 23, 0.4) 0%,
        rgba(2, 6, 23, 0.6) 100%
      );
      color: #e5e7eb;
      font-family: 'Inter', sans-serif;
      font-weight: 700;
      font-size: 13px;
      cursor: pointer;
      backdrop-filter: blur(16px);
      transition: var(--transition-smooth);
      white-space: nowrap;
      letter-spacing: -0.01em;
    }

    .all-offline-btn:hover:not(:disabled) {
      transform: translateY(-2px);
      border-color: rgba(148, 163, 184, 0.45);
      background: linear-gradient(135deg, 
        rgba(2, 6, 23, 0.6) 0%,
        rgba(2, 6, 23, 0.8) 100%
      );
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
    }

    .all-offline-btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none !important;
    }

    body.light .all-offline-btn {
      background: linear-gradient(135deg, 
        rgba(255, 255, 255, 0.9) 0%,
        rgba(241, 245, 249, 0.95) 100%
      );
      color: #0f172a;
      border: 1px solid rgba(148, 163, 184, 0.25);
    }

    body.light .all-offline-btn:hover:not(:disabled) {
      background: linear-gradient(135deg, 
        rgba(255, 255, 255, 1) 0%,
        rgba(241, 245, 249, 1) 100%
      );
      border-color: rgba(148, 163, 184, 0.4);
    }

    /* ===== CLOSER CARDS (PREMIUM) ===== */
    .grid {
      display: flex;
      flex-direction: column;
      gap: 16px;
      margin-bottom: 36px;
    }

    .closer-card {
      background: linear-gradient(145deg, 
        rgba(15, 23, 42, 0.75) 0%,
        rgba(2, 6, 23, 0.85) 100%
      );
      backdrop-filter: blur(24px) saturate(180%);
      border: 1px solid transparent;
      background-clip: padding-box;
      border-radius: var(--radius-md);
      padding: 24px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: var(--transition-spring);
      position: relative;
      overflow: hidden;
      animation: cardSlideIn 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) both;
      opacity: 0;
      transform: translateY(24px);
    }

    .closer-card::before {
      content: '';
      position: absolute;
      inset: 0;
      border-radius: var(--radius-md);
      padding: 1px;
      background: linear-gradient(135deg, 
        rgba(56, 189, 248, 0.2) 0%,
        rgba(56, 189, 248, 0.1) 50%,
        rgba(56, 189, 248, 0.2) 100%
      );
      -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
      mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
      -webkit-mask-composite: xor;
      mask-composite: exclude;
      pointer-events: none;
    }

    @keyframes cardSlideIn {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .closer-card:nth-child(1) { animation-delay: 0.1s; }
    .closer-card:nth-child(2) { animation-delay: 0.15s; }
    .closer-card:nth-child(3) { animation-delay: 0.2s; }
    .closer-card:nth-child(4) { animation-delay: 0.25s; }
    .closer-card:nth-child(5) { animation-delay: 0.3s; }
    .closer-card:nth-child(6) { animation-delay: 0.35s; }
    .closer-card:nth-child(7) { animation-delay: 0.4s; }

    .closer-card:hover {
      transform: translateY(-4px);
      box-shadow: 
        0 24px 48px rgba(15, 23, 42, 0.5),
        0 0 40px rgba(56, 189, 248, 0.25);
    }

    body.light .closer-card {
      background: linear-gradient(145deg, 
        rgba(255, 255, 255, 0.95) 0%,
        rgba(241, 245, 249, 0.98) 100%
      );
    }

    body.light .closer-card::before {
      background: linear-gradient(135deg, 
        rgba(2, 132, 199, 0.2) 0%,
        rgba(2, 132, 199, 0.1) 50%,
        rgba(2, 132, 199, 0.2) 100%
      );
    }

    body.light .closer-card:hover {
      box-shadow: 
        0 24px 48px rgba(2, 132, 199, 0.15),
        0 0 40px rgba(2, 132, 199, 0.2);
    }

    /* Closer Info */
    .closer-info {
      display: flex;
      align-items: center;
      gap: 20px;
    }

    .status-indicator {
      position: relative;
      width: 16px;
      height: 16px;
      border-radius: 50%;
      flex-shrink: 0;
      box-shadow: 0 0 0 2px rgba(2, 6, 23, 0.8);
    }

    .status-indicator::before {
      content: '';
      position: absolute;
      inset: -6px;
      border-radius: 50%;
      opacity: 0.4;
      animation: statusPulse 2s ease-in-out infinite;
    }

    .status-indicator.available {
      background: var(--mth-green);
      box-shadow: 
        0 0 24px rgba(34, 197, 94, 0.6),
        0 0 0 2px rgba(2, 6, 23, 0.8);
    }

    .status-indicator.available::before {
      background: var(--mth-green);
    }

    .status-indicator.busy {
      background: var(--mth-red);
      box-shadow: 
        0 0 24px rgba(239, 68, 68, 0.6),
        0 0 0 2px rgba(2, 6, 23, 0.8);
    }

    .status-indicator.busy::before {
      background: var(--mth-red);
    }

    .status-indicator.offline {
      background: var(--mth-slate);
      box-shadow: 
        0 0 20px rgba(100, 116, 139, 0.5),
        0 0 0 2px rgba(2, 6, 23, 0.8);
    }

    .status-indicator.offline::before {
      background: var(--mth-slate);
    }

    @keyframes statusPulse {
      0%, 100% { 
        transform: scale(0.8);
        opacity: 0.4;
      }
      50% { 
        transform: scale(1.4);
        opacity: 0;
      }
    }

    .closer-details {
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .closer-name {
      font-size: 17px;
      font-weight: 700;
      color: #ffffff;
      letter-spacing: -0.01em;
    }

    body.light .closer-name {
      color: #0f172a;
    }

    .closer-status {
      font-size: 13px;
      color: #94a3b8;
      font-weight: 500;
    }

    body.light .closer-status {
      color: #64748b;
    }

    /* Status Buttons */
    .status-buttons {
      display: flex;
      gap: 10px;
    }

    .status-btn {
      padding: 12px 20px;
      border: 1px solid transparent;
      border-radius: var(--radius-sm);
      font-size: 13px;
      font-weight: 700;
      cursor: pointer;
      transition: var(--transition-smooth);
      min-width: 88px;
      backdrop-filter: blur(12px);
      position: relative;
      overflow: hidden;
      font-family: 'Inter', sans-serif;
      letter-spacing: -0.01em;
    }

    .status-btn::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.25);
      transform: translate(-50%, -50%);
      transition: width 0.4s, height 0.4s;
    }

    .status-btn:active::before {
      width: 200px;
      height: 200px;
    }

    .status-btn.is-active {
      box-shadow: 0 0 0 3px rgba(56, 189, 248, 0.25);
      transform: translateY(-2px);
    }

    .status-btn.is-active::after {
      content: '‚úì';
      position: absolute;
      top: 10px;
      right: 10px;
      font-size: 12px;
      font-weight: 900;
      opacity: 0.9;
    }

    .btn-available {
      background: linear-gradient(135deg, 
        rgba(34, 197, 94, 0.95) 0%,
        rgba(34, 197, 94, 0.75) 100%
      );
      color: white;
      border-color: rgba(34, 197, 94, 0.4);
      box-shadow: 0 8px 20px rgba(34, 197, 94, 0.2);
    }

    .btn-busy {
      background: linear-gradient(135deg, 
        rgba(239, 68, 68, 0.95) 0%,
        rgba(239, 68, 68, 0.75) 100%
      );
      color: white;
      border-color: rgba(239, 68, 68, 0.4);
      box-shadow: 0 8px 20px rgba(239, 68, 68, 0.2);
    }

    .btn-offline {
      background: linear-gradient(135deg, 
        rgba(100, 116, 139, 0.95) 0%,
        rgba(71, 85, 105, 0.85) 100%
      );
      color: #f8fafc;
      border-color: rgba(148, 163, 184, 0.3);
      box-shadow: 0 8px 20px rgba(100, 116, 139, 0.2);
    }

    .status-btn:hover:not(.is-active) {
      transform: translateY(-1px);
      filter: brightness(1.1);
    }

    /* Last Updated */
    .closer-updated {
      margin-top: 4px;
      font-size: 11px;
      color: rgba(148, 163, 184, 0.75);
      font-weight: 500;
      letter-spacing: 0.02em;
    }

    body.light .closer-updated {
      color: rgba(100, 116, 139, 0.85);
    }

    /* ===== BROADCAST NOTE CARD ===== */
    .note-card {
      background: linear-gradient(145deg, 
        rgba(15, 23, 42, 0.92) 0%,
        rgba(2, 6, 23, 0.96) 100%
      );
      backdrop-filter: blur(32px) saturate(180%);
      border: 1px solid transparent;
      background-clip: padding-box;
      border-radius: var(--radius-lg);
      padding: 28px;
      margin-bottom: 32px;
      box-shadow: var(--shadow-card);
      position: relative;
      transition: var(--transition-smooth);
    }

    .note-card::before {
      content: '';
      position: absolute;
      inset: 0;
      border-radius: var(--radius-lg);
      padding: 1px;
      background: linear-gradient(135deg, 
        rgba(34, 197, 94, 0.3) 0%,
        rgba(34, 197, 94, 0.1) 50%,
        rgba(34, 197, 94, 0.3) 100%
      );
      -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
      mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
      -webkit-mask-composite: xor;
      mask-composite: exclude;
      pointer-events: none;
    }

    body.light .note-card {
      background: linear-gradient(145deg, 
        rgba(255, 255, 255, 0.98) 0%,
        rgba(241, 245, 249, 0.96) 100%
      );
    }

    body.light .note-card::before {
      background: linear-gradient(135deg, 
        rgba(34, 197, 94, 0.2) 0%,
        rgba(34, 197, 94, 0.1) 50%,
        rgba(34, 197, 94, 0.2) 100%
      );
    }

    .note-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .note-title {
      font-size: 18px;
      font-weight: 800;
      color: #ffffff;
      display: flex;
      align-items: center;
      gap: 12px;
      letter-spacing: -0.01em;
    }

    body.light .note-title {
      color: #0f172a;
    }

    .note-title::before {
      content: '';
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: var(--mth-green);
      animation: noteDotPulse 2s ease-in-out infinite;
      box-shadow: 0 0 20px rgba(34, 197, 94, 0.5);
    }

    @keyframes noteDotPulse {
      0%, 100% { 
        transform: scale(1);
        opacity: 1;
      }
      50% { 
        transform: scale(1.4);
        opacity: 0.7;
      }
    }

    .note-hint {
      font-size: 12px;
      color: #94a3b8;
      font-weight: 500;
    }

    body.light .note-hint {
      color: #64748b;
    }

    #noteInput {
      width: 100%;
      background: linear-gradient(135deg, 
        rgba(2, 6, 23, 0.6) 0%,
        rgba(2, 6, 23, 0.8) 100%
      );
      border: 1px solid rgba(56, 189, 248, 0.25);
      border-radius: var(--radius-sm);
      padding: 20px;
      color: #ffffff;
      font-size: 14px;
      font-family: 'Inter', sans-serif;
      resize: none;
      min-height: 140px;
      transition: var(--transition-smooth);
      margin-bottom: 20px;
      line-height: 1.6;
      backdrop-filter: blur(16px);
    }

    #noteInput:focus {
      outline: none;
      border-color: var(--mth-cyan);
      box-shadow: 0 0 0 3px rgba(56, 189, 248, 0.15);
      background: linear-gradient(135deg, 
        rgba(2, 6, 23, 0.8) 0%,
        rgba(2, 6, 23, 0.9) 100%
      );
    }

    body.light #noteInput {
      background: linear-gradient(135deg, 
        rgba(255, 255, 255, 0.9) 0%,
        rgba(241, 245, 249, 0.95) 100%
      );
      border: 1px solid rgba(2, 132, 199, 0.25);
      color: #0f172a;
    }

    body.light #noteInput:focus {
      border-color: var(--mth-blue);
      box-shadow: 0 0 0 3px rgba(2, 132, 199, 0.1);
      background: linear-gradient(135deg, 
        rgba(255, 255, 255, 1) 0%,
        rgba(241, 245, 249, 1) 100%
      );
    }

    .note-actions {
      display: flex;
      gap: 16px;
    }

    .note-btn {
      flex: 1;
      padding: 18px 24px;
      border: 1px solid transparent;
      border-radius: var(--radius-sm);
      font-size: 15px;
      font-weight: 800;
      cursor: pointer;
      transition: var(--transition-smooth);
      position: relative;
      overflow: hidden;
      font-family: 'Inter', sans-serif;
      letter-spacing: -0.01em;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .note-btn::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.25);
      transform: translate(-50%, -50%);
      transition: width 0.6s, height 0.6s;
    }

    .note-btn:active::before {
      width: 300px;
      height: 300px;
    }

    #saveNoteBtn {
      background: var(--gradient-primary);
      color: white;
      border-color: rgba(56, 189, 248, 0.5);
      box-shadow: var(--shadow-button);
    }

    #saveNoteBtn:hover {
      transform: translateY(-2px);
      box-shadow: 
        0 16px 32px rgba(0, 83, 207, 0.35),
        0 0 0 1px rgba(255, 255, 255, 0.15);
      filter: brightness(1.1);
    }

    #clearNoteBtn {
      background: linear-gradient(135deg, 
        rgba(239, 68, 68, 0.95) 0%,
        rgba(220, 38, 38, 0.85) 100%
      );
      color: white;
      border-color: rgba(239, 68, 68, 0.5);
      box-shadow: 0 12px 24px rgba(239, 68, 68, 0.25);
    }

    #clearNoteBtn:hover {
      transform: translateY(-2px);
      box-shadow: 
        0 16px 32px rgba(239, 68, 68, 0.35),
        0 0 0 1px rgba(255, 255, 255, 0.15);
      filter: brightness(1.1);
    }

    /* ===== THEME CARD ===== */
    .theme-card {
      background: linear-gradient(145deg, 
        rgba(15, 23, 42, 0.92) 0%,
        rgba(2, 6, 23, 0.96) 100%
      );
      backdrop-filter: blur(32px) saturate(180%);
      border: 1px solid transparent;
      background-clip: padding-box;
      border-radius: var(--radius-lg);
      padding: 24px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: var(--shadow-card);
      position: relative;
    }

    .theme-card::before {
      content: '';
      position: absolute;
      inset: 0;
      border-radius: var(--radius-lg);
      padding: 1px;
      background: linear-gradient(135deg, 
        rgba(56, 189, 248, 0.3) 0%,
        rgba(56, 189, 248, 0.1) 50%,
        rgba(56, 189, 248, 0.3) 100%
      );
      -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
      mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
      -webkit-mask-composite: xor;
      mask-composite: exclude;
      pointer-events: none;
    }

    body.light .theme-card {
      background: linear-gradient(145deg, 
        rgba(255, 255, 255, 0.98) 0%,
        rgba(241, 245, 249, 0.96) 100%
      );
    }

    .theme-label {
      font-size: 17px;
      font-weight: 700;
      color: #ffffff;
      display: flex;
      align-items: center;
      gap: 16px;
      letter-spacing: -0.01em;
    }

    body.light .theme-label {
      color: #0f172a;
    }

    .theme-label::before {
      content: 'üåô';
      font-size: 24px;
      filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
    }

    body.light .theme-label::before {
      content: '‚òÄÔ∏è';
    }

    .theme-switch {
      position: relative;
      width: 64px;
      height: 36px;
    }

    .theme-switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .theme-slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, #374151, #1f2937);
      border-radius: 36px;
      transition: var(--transition-smooth);
      border: 2px solid rgba(56, 189, 248, 0.4);
    }

    .theme-slider::before {
      position: absolute;
      content: '';
      height: 28px;
      width: 28px;
      left: 2px;
      bottom: 2px;
      background: linear-gradient(135deg, #d1d5db, #9ca3af);
      border-radius: 50%;
      transition: var(--transition-smooth);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    }

    .theme-switch input:checked + .theme-slider {
      background: var(--gradient-primary);
      border-color: rgba(56, 189, 248, 0.6);
    }

    .theme-switch input:checked + .theme-slider::before {
      transform: translateX(28px);
      background: linear-gradient(135deg, #ffffff, #f3f4f6);
    }

    /* ===== TOAST MESSAGES (PREMIUM) ===== */
    #message {
      position: fixed;
      bottom: calc(24px + env(safe-area-inset-bottom, 0));
      left: 50%;
      transform: translateX(-50%) translateY(40px);
      background: linear-gradient(145deg, 
        rgba(15, 23, 42, 0.98) 0%,
        rgba(2, 6, 23, 0.99) 100%
      );
      backdrop-filter: blur(32px) saturate(180%);
      border: 1px solid transparent;
      background-clip: padding-box;
      border-radius: var(--radius-md);
      padding: 20px 28px;
      color: white;
      font-size: 14px;
      font-weight: 600;
      box-shadow: var(--shadow-toast);
      opacity: 0;
      visibility: hidden;
      transition: var(--transition-spring);
      z-index: 1000;
      max-width: 90%;
      text-align: center;
      display: flex;
      align-items: center;
      gap: 12px;
      letter-spacing: -0.01em;
    }

    #message::before {
      content: '';
      position: absolute;
      inset: 0;
      border-radius: var(--radius-md);
      padding: 1px;
      background: linear-gradient(135deg, 
        rgba(56, 189, 248, 0.4) 0%,
        rgba(56, 189, 248, 0.2) 50%,
        rgba(56, 189, 248, 0.4) 100%
      );
      -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
      mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
      -webkit-mask-composite: xor;
      mask-composite: exclude;
      pointer-events: none;
    }

    body.light #message {
      background: linear-gradient(145deg, 
        rgba(255, 255, 255, 0.99) 0%,
        rgba(241, 245, 249, 0.98) 100%
      );
      color: #0f172a;
    }

    #message.message--show {
      opacity: 1;
      visibility: visible;
      transform: translateX(-50%) translateY(0);
    }

    #message.message--success {
      border-color: rgba(0, 83, 207, 0.55);
    }

    #message.message--success::before {
      background: linear-gradient(135deg, 
        rgba(0, 83, 207, 0.45) 0%,
        rgba(56, 189, 248, 0.22) 50%,
        rgba(0, 83, 207, 0.45) 100%
      );
    }

    #message.message--error {
      border-color: rgba(239, 68, 68, 0.5);
    }

    #message.message--error::before {
      background: linear-gradient(135deg, 
        rgba(239, 68, 68, 0.4) 0%,
        rgba(239, 68, 68, 0.2) 50%,
        rgba(239, 68, 68, 0.4) 100%
      );
    }

    /* Toast Icons */
    .toast-icon {
      font-size: 18px;
      flex-shrink: 0;
    }

    /* ===== SKELETON LOADING (PREMIUM) ===== */
    .skeleton {
      background: linear-gradient(
        90deg,
        rgba(56, 189, 248, 0.1) 25%,
        rgba(56, 189, 248, 0.2) 50%,
        rgba(56, 189, 248, 0.1) 75%
      );
      background-size: 200% 100%;
      animation: shimmer 1.5s infinite;
      border-radius: var(--radius-md);
      height: 96px;
      border: 1px solid rgba(56, 189, 248, 0.2);
      position: relative;
      overflow: hidden;
    }

    .skeleton::after {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(
        120deg,
        transparent 30%,
        rgba(255, 255, 255, 0.1),
        transparent 70%
      );
      animation: shimmer 1.5s infinite;
    }

    body.light .skeleton {
      background: linear-gradient(
        90deg,
        rgba(2, 132, 199, 0.1) 25%,
        rgba(2, 132, 199, 0.2) 50%,
        rgba(2, 132, 199, 0.1) 75%
      );
      border: 1px solid rgba(2, 132, 199, 0.2);
    }

    @keyframes shimmer {
      0% { background-position: -200% 0; }
      100% { background-position: 200% 0; }
    }

    /* ===== INLINE CONFIRMATIONS ===== */
    .status-btn.is-saving {
      opacity: 0.8;
      cursor: not-allowed;
      transform: none !important;
    }

    .status-btn.inline-ok::after {
      content: "Saved ‚úì";
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 13px;
      font-weight: 800;
      background: linear-gradient(135deg, 
        rgba(2, 6, 23, 0.8) 0%,
        rgba(2, 6, 23, 0.9) 100%
      );
      backdrop-filter: blur(12px);
      border-radius: var(--radius-sm);
      color: #ffffff;
      animation: fadeInOut 0.9s ease-in-out;
    }

    @keyframes fadeInOut {
      0%, 100% { opacity: 0; }
      20%, 80% { opacity: 1; }
    }

    body.light .status-btn.inline-ok::after {
      background: linear-gradient(135deg, 
        rgba(255, 255, 255, 0.9) 0%,
        rgba(241, 245, 249, 0.95) 100%
      );
      color: #0f172a;
    }

    .status-btn.inline-err::after {
      content: "Failed ‚úó";
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 13px;
      font-weight: 800;
      background: linear-gradient(135deg, 
        rgba(239, 68, 68, 0.3) 0%,
        rgba(239, 68, 68, 0.2) 100%
      );
      backdrop-filter: blur(12px);
      border-radius: var(--radius-sm);
      color: #ffffff;
      animation: fadeInOut 1.1s ease-in-out;
    }

    /* ===== RESPONSIVE DESIGN ===== */
    @media (max-width: 480px) {
      .container {
        padding: 20px 16px calc(28px + env(safe-area-inset-bottom, 0));
      }

      .header-card {
        padding: 20px;
        border-radius: 20px;
        margin-bottom: 24px;
      }

      .brand-logo {
        width: 48px;
        height: 48px;
        border-radius: 16px;
      }

      .logo-svg {
        width: 28px;
        height: 28px;
      }

      h1 {
        font-size: 22px;
      }

      .tag-pro {
        font-size: 10px;
        padding: 5px 12px;
      }

      .closer-card {
        padding: 20px;
        border-radius: 18px;
      }

      .status-buttons {
        flex-direction: column;
        gap: 8px;
      }

      .status-btn {
        min-width: 80px;
        padding: 14px 16px;
        font-size: 12px;
        min-height: 48px;
      }

      .note-card {
        padding: 20px;
        border-radius: 20px;
      }

      .note-actions {
        flex-direction: column;
        gap: 12px;
      }

      .note-btn {
        padding: 16px 20px;
        font-size: 14px;
      }

      .theme-card {
        padding: 20px;
        border-radius: 20px;
      }

      /* Note actions: keep normal flow on mobile to avoid sticky-jank */
      .note-actions {
        position: relative;
        bottom: auto;
        padding: 0;
        border: 0;
        background: transparent;
        backdrop-filter: none;
        z-index: auto;
      }
/* iOS Safari: avoid sticky-jank for the action buttons */
      @supports (-webkit-touch-callout: none) {
        .note-actions {
          position: relative;
          bottom: auto;
        }
      }
}

    /* ===== REDUCED MOTION ===== */
    @media (prefers-reduced-motion: reduce) {
      *,
      *::before,
      *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
      }
    }

    /* ===== LOCK SCREEN (PREMIUM) ===== */
    .lock-overlay {
      position: fixed;
      inset: 0;
      z-index: 9999;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
      background: radial-gradient(ellipse at top, 
        rgba(56, 189, 248, 0.2) 0%,
        rgba(2, 6, 23, 0.96) 70%
      );
      backdrop-filter: blur(24px);
    }

    body.light .lock-overlay {
      background: radial-gradient(ellipse at top, 
        rgba(2, 132, 199, 0.15) 0%,
        rgba(248, 250, 252, 0.98) 70%
      );
    }

    .lock-card {
      width: 100%;
      max-width: 520px;
      border-radius: 28px;
      padding: 32px;
      border: 1px solid transparent;
      background: linear-gradient(145deg, 
        rgba(15, 23, 42, 0.95) 0%,
        rgba(2, 6, 23, 0.98) 100%
      );
      backdrop-filter: blur(32px) saturate(180%);
      box-shadow: var(--shadow-card);
      overflow: hidden;
      position: relative;
      animation: lockSlideUp 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    .lock-card::before {
      content: "";
      position: absolute;
      inset: 0;
      border-radius: 28px;
      padding: 1px;
      background: linear-gradient(135deg, 
        rgba(56, 189, 248, 0.3) 0%,
        rgba(56, 189, 248, 0.1) 50%,
        rgba(56, 189, 248, 0.3) 100%
      );
      -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
      mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
      -webkit-mask-composite: xor;
      mask-composite: exclude;
      pointer-events: none;
    }

    body.light .lock-card {
      background: linear-gradient(145deg, 
        rgba(255, 255, 255, 0.98) 0%,
        rgba(241, 245, 249, 0.99) 100%
      );
    }

    @keyframes lockSlideUp {
      from { 
        opacity: 0;
        transform: translateY(40px) scale(0.98);
      }
      to { 
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    .lock-title {
      display: flex;
      align-items: center;
      gap: 20px;
      margin-bottom: 16px;
      position: relative;
      z-index: 1;
    }

    .lock-badge {
      width: 60px;
      height: 60px;
      border-radius: 20px;
      background: var(--gradient-primary);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 900;
      letter-spacing: 0.08em;
      color: #fff;
      box-shadow: 
        0 16px 32px rgba(56, 189, 248, 0.3),
        0 0 32px rgba(56, 189, 248, 0.4),
        inset 0 1px 0 rgba(255, 255, 255, 0.3);
      position: relative;
    }

    .lock-badge::after {
      content: '';
      position: absolute;
      inset: 0;
      border-radius: 20px;
      background: linear-gradient(
        120deg,
        transparent 30%,
        rgba(255, 255, 255, 0.3),
        transparent 70%
      );
      opacity: 0.5;
    }

    .lock-h1 {
      font-family: 'Manrope', sans-serif;
      font-size: 28px;
      font-weight: 800;
      margin: 0;
      letter-spacing: -0.02em;
      background: linear-gradient(135deg, #ffffff 0%, #d1d5db 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    body.light .lock-h1 {
      background: var(--gradient-primary);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .lock-sub {
      margin: 0 0 24px;
      font-size: 14px;
      color: #94a3b8;
      line-height: 1.6;
      position: relative;
      z-index: 1;
      max-width: 46ch;
    }

    body.light .lock-sub {
      color: #64748b;
    }

    /* Role Switch */
    .role-switch {
      display: flex;
      gap: 12px;
      margin: 0 0 24px;
      position: relative;
      z-index: 1;
    }

    .role-btn {
      flex: 0 0 auto;
      border: 1px solid rgba(56, 189, 248, 0.2);
      background: linear-gradient(135deg, 
        rgba(2, 6, 23, 0.4) 0%,
        rgba(2, 6, 23, 0.6) 100%
      );
      color: #e5e7eb;
      font-weight: 800;
      font-size: 13px;
      padding: 12px 20px;
      border-radius: 16px;
      cursor: pointer;
      transition: var(--transition-smooth);
      font-family: 'Inter', sans-serif;
      letter-spacing: -0.01em;
      backdrop-filter: blur(12px);
    }

    .role-btn:hover {
      transform: translateY(-2px);
      border-color: rgba(56, 189, 248, 0.4);
      background: linear-gradient(135deg, 
        rgba(2, 6, 23, 0.6) 0%,
        rgba(2, 6, 23, 0.8) 100%
      );
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
    }

    .role-btn.is-active {
      border-color: rgba(56, 189, 248, 0.5);
      background: var(--gradient-primary);
      box-shadow: 
        0 0 0 3px rgba(56, 189, 248, 0.15),
        0 8px 24px rgba(56, 189, 248, 0.25);
      color: white;
    }

    body.light .role-btn {
      background: linear-gradient(135deg, 
        rgba(255, 255, 255, 0.9) 0%,
        rgba(241, 245, 249, 0.95) 100%
      );
      color: #0f172a;
      border: 1px solid rgba(2, 132, 199, 0.2);
    }

    body.light .role-btn:hover {
      border-color: rgba(2, 132, 199, 0.4);
      background: linear-gradient(135deg, 
        rgba(255, 255, 255, 1) 0%,
        rgba(241, 245, 249, 1) 100%
      );
    }

    body.light .role-btn.is-active {
      border-color: rgba(2, 132, 199, 0.5);
      background: var(--gradient-primary);
      color: white;
    }

    /* Input Fields */
    .lock-row {
      display: flex;
      flex-direction: column;
      gap: 16px;
      margin-top: 20px;
    }

    .lock-input-wrap {
      position: relative;
      width: 100%;
    }

    .lock-input {
      width: 100%;
      border-radius: 20px;
      padding: 18px 52px 18px 20px;
      border: 1px solid rgba(56, 189, 248, 0.25);
      background: linear-gradient(135deg, 
        rgba(2, 6, 23, 0.6) 0%,
        rgba(2, 6, 23, 0.8) 100%
      );
      color: #fff;
      font-size: 15px;
      font-family: 'Inter', sans-serif;
      outline: none;
      transition: var(--transition-smooth);
      backdrop-filter: blur(16px);
    }

    .lock-input:focus {
      border-color: rgba(56, 189, 248, 0.5);
      box-shadow: 0 0 0 3px rgba(56, 189, 248, 0.15);
      background: linear-gradient(135deg, 
        rgba(2, 6, 23, 0.8) 0%,
        rgba(2, 6, 23, 0.9) 100%
      );
    }

    body.light .lock-input {
      background: linear-gradient(135deg, 
        rgba(255, 255, 255, 0.9) 0%,
        rgba(241, 245, 249, 0.95) 100%
      );
      border: 1px solid rgba(2, 132, 199, 0.25);
      color: #0f172a;
    }

    body.light .lock-input:focus {
      border-color: rgba(2, 132, 199, 0.5);
      box-shadow: 0 0 0 3px rgba(2, 132, 199, 0.1);
      background: linear-gradient(135deg, 
        rgba(255, 255, 255, 1) 0%,
        rgba(241, 245, 249, 1) 100%
      );
    }

    /* Password Toggle */
    .pass-toggle {
      position: absolute;
      right: 12px;
      top: 50%;
      transform: translateY(-50%);
      border: 1px solid rgba(56, 189, 248, 0.2);
      background: linear-gradient(135deg, 
        rgba(2, 6, 23, 0.4) 0%,
        rgba(2, 6, 23, 0.6) 100%
      );
      cursor: pointer;
      width: 40px;
      height: 40px;
      border-radius: 14px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      transition: var(--transition-smooth);
      color: #cbd5e1;
      backdrop-filter: blur(12px);
    }

    .pass-toggle:hover {
      transform: translateY(-50%) scale(1.05);
      border-color: rgba(56, 189, 248, 0.4);
      background: linear-gradient(135deg, 
        rgba(2, 6, 23, 0.6) 0%,
        rgba(2, 6, 23, 0.8) 100%
      );
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    }

    body.light .pass-toggle {
      background: linear-gradient(135deg, 
        rgba(255, 255, 255, 0.9) 0%,
        rgba(241, 245, 249, 0.95) 100%
      );
      border: 1px solid rgba(2, 132, 199, 0.2);
      color: #334155;
    }

    .pass-toggle svg {
      width: 20px;
      height: 20px;
      display: block;
    }

    /* Premium Lock Button */
    .lock-btn {
      width: 100%;
      border-radius: 20px !important;
      padding: 20px !important;
      font-size: 16px !important;
      font-weight: 800 !important;
      letter-spacing: 0.02em !important;
      background: var(--gradient-primary) !important;
      border: 1px solid rgba(56, 189, 248, 0.5) !important;
      box-shadow: 
        0 16px 32px rgba(56, 189, 248, 0.3),
        inset 0 1px 0 rgba(255, 255, 255, 0.4) !important;
      transition: var(--transition-smooth) !important;
      position: relative;
      overflow: hidden;
      color: white !important;
      font-family: 'Inter', sans-serif !important;
      text-transform: uppercase;
      letter-spacing: 0.05em !important;
    }

    .lock-btn::after {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(
        120deg,
        transparent 30%,
        rgba(255, 255, 255, 0.4),
        transparent 70%
      );
      opacity: 0.4;
    }

    .lock-btn:hover:not(:disabled) {
      transform: translateY(-2px) !important;
      box-shadow: 
        0 20px 40px rgba(56, 189, 248, 0.4),
        inset 0 1px 0 rgba(255, 255, 255, 0.5) !important;
      filter: brightness(1.1);
    }

    .lock-btn:active:not(:disabled) {
      transform: translateY(0) !important;
      box-shadow: 
        0 12px 24px rgba(56, 189, 248, 0.3),
        inset 0 2px 6px rgba(0, 0, 0, 0.2) !important;
    }

    .lock-btn:disabled {
      opacity: 0.7;
      cursor: not-allowed;
      box-shadow: none !important;
      transform: none !important;
    }

    /* Error & Hints */
    .lock-error {
      margin-top: 16px;
      font-size: 13px;
      color: #fecaca;
      display: none;
      position: relative;
      z-index: 1;
      font-weight: 600;
      text-align: center;
      background: linear-gradient(135deg, 
        rgba(239, 68, 68, 0.2) 0%,
        rgba(239, 68, 68, 0.1) 100%
      );
      padding: 12px;
      border-radius: 14px;
      backdrop-filter: blur(12px);
    }

    body.light .lock-error {
      color: #b91c1c;
      background: linear-gradient(135deg, 
        rgba(239, 68, 68, 0.1) 0%,
        rgba(239, 68, 68, 0.05) 100%
      );
    }

    .caps-hint {
      margin-top: 12px;
      font-size: 13px;
      color: #fbbf24;
      display: none;
      position: relative;
      z-index: 1;
      font-weight: 600;
      text-align: center;
      background: linear-gradient(135deg, 
        rgba(251, 191, 36, 0.2) 0%,
        rgba(251, 191, 36, 0.1) 100%
      );
      padding: 12px;
      border-radius: 14px;
      backdrop-filter: blur(12px);
    }


    /* Privacy link (Lock Screen) */
    .sb-privacy-wrap{
      display:flex;
      justify-content:center;
      margin-top:16px;
      padding-bottom:2px;
      position: relative;
      z-index: 1;
    }
    .sb-privacy-link{
      text-decoration:none;
      text-align:center;
      line-height:1.05;
      font-family: 'Inter', system-ui, -apple-system, 'Segoe UI', Roboto, sans-serif;
      font-weight:800;
      color: var(--mth-blue);
      opacity:0.9;
    }
    .sb-privacy-link:hover{
      text-decoration:underline;
      opacity:1;
    }
    .sb-privacy-brand,
    .sb-privacy-policy{
      display:block;
      font-size:12px;
    }
    body.light .caps-hint {
      color: #b45309;
      background: linear-gradient(135deg, 
        rgba(251, 191, 36, 0.1) 0%,
        rgba(251, 191, 36, 0.05) 100%
      );
    }

    /* Shake Animation */
    @keyframes mthShake {
      0%, 100% { transform: translateX(0); }
      10%, 30%, 50%, 70%, 90% { transform: translateX(-4px); }
      20%, 40%, 60%, 80% { transform: translateX(4px); }
    }

    .lock-card.is-shaking {
      animation: mthShake 0.5s ease-in-out;
    }

    /* Closer Login */
    .closer-login {
      margin: 0 0 24px;
      position: relative;
      z-index: 1;
    }

    .closer-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 16px;
      margin-bottom: 16px;
    }

    .closer-field {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .closer-label {
      font-size: 13px;
      color: #94a3b8;
      font-weight: 700;
      letter-spacing: 0.02em;
    }

    body.light .closer-label {
      color: #64748b;
    }

    .closer-select, .closer-input {
      width: 100%;
      border-radius: 20px;
      padding: 18px 20px;
      border: 1px solid rgba(56, 189, 248, 0.25);
      background: linear-gradient(135deg, 
        rgba(2, 6, 23, 0.6) 0%,
        rgba(2, 6, 23, 0.8) 100%
      );
      color: #fff;
      font-size: 15px;
      font-family: 'Inter', sans-serif;
      outline: none;
      transition: var(--transition-smooth);
      backdrop-filter: blur(16px);
    }

    .closer-select:focus, .closer-input:focus {
      border-color: rgba(56, 189, 248, 0.5);
      box-shadow: 0 0 0 3px rgba(56, 189, 248, 0.15);
      background: linear-gradient(135deg, 
        rgba(2, 6, 23, 0.8) 0%,
        rgba(2, 6, 23, 0.9) 100%
      );
    }

    body.light .closer-select, body.light .closer-input {
      background: linear-gradient(135deg, 
        rgba(255, 255, 255, 0.9) 0%,
        rgba(241, 245, 249, 0.95) 100%
      );
      border: 1px solid rgba(2, 132, 199, 0.25);
      color: #0f172a;
    }

    .closer-pin-wrap {
      position: relative;
    }

    .closer-pin-wrap .pass-toggle {
      right: 12px;
      top: 50%;
      transform: translateY(-50%);
    }

    .closer-pin-wrap .closer-input {
      padding-right: 60px;
    }

    .remember-row {
      display: flex;
      align-items: center;
      gap: 12px;
      font-size: 13px;
      color: #cbd5e1;
      user-select: none;
      margin-bottom: 20px;
      font-weight: 500;
    }

    .remember-row input {
      width: 18px;
      height: 18px;
      accent-color: var(--mth-blue);
    }

    body.light .remember-row {
      color: #334155;
    }

    /* Role-specific hiding */
    body.role-closer .note-card,
    body.role-closer .tools-row {
      display: none !important;
    }

    /* ===== CONFIRMATION MODAL ===== */
    .confirm-overlay {
      position: fixed;
      inset: 0;
      display: none;
      align-items: center;
      justify-content: center;
      background: rgba(2, 6, 23, 0.7);
      backdrop-filter: blur(16px);
      z-index: 99999;
      padding: 20px;
      transition: opacity 0.3s ease;
    }

    .confirm-overlay.show {
      display: flex;
      animation: fadeIn 0.3s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .confirm-modal {
      width: min(520px, calc(100vw - 40px));
      border-radius: 24px;
      padding: 28px;
      background: linear-gradient(145deg, 
        rgba(15, 23, 42, 0.95) 0%,
        rgba(2, 6, 23, 0.98) 100%
      );
      backdrop-filter: blur(32px) saturate(180%);
      border: 1px solid transparent;
      background-clip: padding-box;
      box-shadow: var(--shadow-card);
      color: #e5e7eb;
      animation: modalSlideUp 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    .confirm-modal::before {
      content: '';
      position: absolute;
      inset: 0;
      border-radius: 24px;
      padding: 1px;
      background: linear-gradient(135deg, 
        rgba(56, 189, 248, 0.3) 0%,
        rgba(56, 189, 248, 0.1) 50%,
        rgba(56, 189, 248, 0.3) 100%
      );
      -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
      mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
      -webkit-mask-composite: xor;
      mask-composite: exclude;
      pointer-events: none;
    }

    @keyframes modalSlideUp {
      from { 
        opacity: 0;
        transform: translateY(40px) scale(0.98);
      }
      to { 
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    body.light .confirm-overlay {
      background: rgba(255, 255, 255, 0.7);
    }

    body.light .confirm-modal {
      background: linear-gradient(145deg, 
        rgba(255, 255, 255, 0.98) 0%,
        rgba(241, 245, 249, 0.99) 100%
      );
      color: #0f172a;
    }

    .confirm-title {
      font-family: 'Manrope', sans-serif;
      font-size: 18px;
      font-weight: 800;
      margin: 0 0 16px 0;
      letter-spacing: -0.01em;
      background: linear-gradient(135deg, #ffffff 0%, #d1d5db 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    body.light .confirm-title {
      background: var(--gradient-primary);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .confirm-msg {
      font-size: 14px;
      line-height: 1.6;
      color: rgba(226, 232, 240, 0.9);
      margin: 0 0 24px 0;
    }

    body.light .confirm-msg {
      color: rgba(15, 23, 42, 0.8);
    }

    .confirm-actions {
      display: flex;
      gap: 12px;
      justify-content: flex-end;
    }

    .confirm-btn {
      height: 48px;
      padding: 0 24px;
      border-radius: 16px;
      border: 1px solid rgba(148, 163, 184, 0.25);
      background: linear-gradient(135deg, 
        rgba(2, 6, 23, 0.6) 0%,
        rgba(2, 6, 23, 0.8) 100%
      );
      color: #e5e7eb;
      font-weight: 800;
      font-size: 14px;
      cursor: pointer;
      transition: var(--transition-smooth);
      user-select: none;
      font-family: 'Inter', sans-serif;
      letter-spacing: -0.01em;
      backdrop-filter: blur(12px);
    }

    .confirm-btn:hover {
      transform: translateY(-2px);
      border-color: rgba(148, 163, 184, 0.45);
      background: linear-gradient(135deg, 
        rgba(2, 6, 23, 0.8) 0%,
        rgba(2, 6, 23, 0.9) 100%
      );
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
    }

    .confirm-btn.ok {
      border-color: rgba(56, 189, 248, 0.5);
      background: var(--gradient-primary);
      box-shadow: var(--shadow-button);
      color: white;
    }

    .confirm-btn.ok:hover {
      border-color: rgba(96, 165, 250, 0.7);
      filter: brightness(1.1);
      box-shadow: 
        0 16px 32px rgba(0, 83, 207, 0.35),
        0 0 0 1px rgba(255, 255, 255, 0.15);
    }

    body.light .confirm-btn.cancel {
      background: linear-gradient(135deg, 
        rgba(255, 255, 255, 0.9) 0%,
        rgba(241, 245, 249, 0.95) 100%
      );
      color: #0f172a;
      border: 1px solid rgba(148, 163, 184, 0.4);
    }

    body.light .confirm-btn.ok {
      background: var(--gradient-primary);
      color: #ffffff;
      border: 1px solid rgba(56, 189, 248, 0.5);
    }

    /* ===== LOADING OVERLAY ===== */
    .mth-loading {
      position: fixed;
      inset: 0;
      display: none;
      align-items: center;
      justify-content: center;
      background: rgba(2, 6, 23, 0.8);
      backdrop-filter: blur(20px);
      z-index: 100000;
      padding: 20px;
      transition: opacity 0.3s ease;
    }

    .mth-loading.show {
      display: flex;
      animation: fadeIn 0.3s ease;
    }

    body.light .mth-loading {
      background: rgba(255, 255, 255, 0.8);
    }

    .mth-loading-card {
      width: min(420px, calc(100vw - 40px));
      border-radius: 24px;
      padding: 28px;
      border: 1px solid transparent;
      background: linear-gradient(145deg, 
        rgba(15, 23, 42, 0.95) 0%,
        rgba(2, 6, 23, 0.98) 100%
      );
      backdrop-filter: blur(32px) saturate(180%);
      box-shadow: var(--shadow-card);
      color: #e5e7eb;
      display: flex;
      gap: 20px;
      align-items: center;
      animation: modalSlideUp 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    .mth-loading-card::before {
      content: '';
      position: absolute;
      inset: 0;
      border-radius: 24px;
      padding: 1px;
      background: linear-gradient(135deg, 
        rgba(56, 189, 248, 0.3) 0%,
        rgba(56, 189, 248, 0.1) 50%,
        rgba(56, 189, 248, 0.3) 100%
      );
      -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
      mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
      -webkit-mask-composite: xor;
      mask-composite: exclude;
      pointer-events: none;
    }

    body.light .mth-loading-card {
      background: linear-gradient(145deg, 
        rgba(255, 255, 255, 0.98) 0%,
        rgba(241, 245, 249, 0.99) 100%
      );
      color: #0f172a;
    }

    .mth-spinner {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      border: 4px solid rgba(56, 189, 248, 0.2);
      border-top-color: var(--mth-cyan);
      border-right-color: var(--mth-blue);
      animation: mthSpin 1s linear infinite;
      flex-shrink: 0;
      box-shadow: 0 0 20px rgba(56, 189, 248, 0.3);
    }

    @keyframes mthSpin {
      to { transform: rotate(360deg); }
    }

    .mth-loading-title {
      font-family: 'Manrope', sans-serif;
      font-weight: 800;
      font-size: 16px;
      letter-spacing: -0.01em;
      margin: 0;
      line-height: 1.3;
      background: linear-gradient(135deg, #ffffff 0%, #d1d5db 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    body.light .mth-loading-title {
      background: var(--gradient-primary);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .mth-loading-sub {
      margin: 6px 0 0 0;
      font-size: 13px;
      line-height: 1.5;
      color: rgba(226, 232, 240, 0.8);
    }

    body.light .mth-loading-sub {
      color: rgba(15, 23, 42, 0.7);
    }

    /* ===== HAPTIC FEEDBACK INDICATOR ===== */
    @media (hover: hover) and (pointer: fine) {
      .haptic {
        cursor: pointer;
      }
      
      .haptic:active {
        animation: hapticPulse 0.15s ease;
      }
    }

    @keyframes hapticPulse {
      0% { transform: scale(1); }
      50% { transform: scale(0.98); }
      100% { transform: scale(1); }
    }

    /* ===== ACCESSIBILITY ===== */
    @media (prefers-contrast: high) {
      * {
        border-width: 2px !important;
      }
      
      .status-indicator {
        box-shadow: 0 0 0 3px currentColor !important;
      }
    }

    /* Print Styles */
    @media print {
      .lock-overlay,
      .note-actions,
      .theme-card,
      .header-logout,
      .tools-row,
      .status-buttons,
      #message {
        display: none !important;
      }
      
      .container {
        max-width: 100%;
        padding: 20px;
      }
      
      .closer-card {
        break-inside: avoid;
        box-shadow: none !important;
        border: 2px solid #000 !important;
      }
    }
  
    /* ===== iOS SAFE-AREA TOP MASK (prevents overscroll bleed) ===== */
    .container::before {
      content: "";
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: calc(env(safe-area-inset-top, 0px) + 14px);
      background: #020617;
      z-index: 10000;
      pointer-events: none;
    }

    body.light .container::before {
      background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
    }

    /* Reduce iOS overscroll paint glitches */
    html, body {
      overscroll-behavior-y: none;
    }


    /* ===== CLOSER VIEW TOP-SEAM FADE (REMOVE THIN LINE ARTIFACT) ===== */
    body.role-closer .container{
      position: relative;
    }
    body.role-closer .container::before{
      content: "";
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: 18px;
      pointer-events: none;
      z-index: 550; /* above header-card (500), below lock overlay (9999) */
      background: linear-gradient(
        to bottom,
        var(--top-cover) 0%,
        rgba(2, 6, 23, 0) 100%
      );
    }
    body.light.role-closer .container::before{
      background: linear-gradient(
        to bottom,
        var(--top-cover) 0%,
        rgba(248, 250, 252, 0) 100%
      );
    }

  </style>
</head>
<body class="dark">

  <!-- Premium Loading Overlay -->
  <div class="mth-loading" id="mthLoading" aria-hidden="true">
    <div class="mth-loading-card" role="status" aria-live="polite">
      <div class="mth-spinner" aria-hidden="true"></div>
      <div>
        <p class="mth-loading-title" id="mthLoadingTitle">Signing in</p>
        <p class="mth-loading-sub" id="mthLoadingSub">Loading your premium dashboard‚Ä¶</p>
      </div>
    </div>
  </div>

  <!-- Premium Lock Screen -->
  <div class="lock-overlay" id="lockOverlay" aria-modal="true" role="dialog">
    <div class="lock-card">
      <div class="lock-title">
        <div class="lock-badge">
          <!-- Custom SVG Logo -->
          <svg class="logo-svg" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
  <image x="0" y="0" width="24" height="24" preserveAspectRatio="xMidYMid meet" href="data:image/png;base64,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" />
</svg>
        </div>
        <h2 class="lock-h1">Switchboard</h2>
      </div>
      <p class="lock-sub">Premium team availability and calling instructions dashboard</p>

      <!-- Role Switch -->
      <div class="role-switch" role="tablist" aria-label="Login role">
        <button id="roleAdmin" class="role-btn is-active" type="button" role="tab" aria-selected="true">Admin</button>
        <button id="roleCloser" class="role-btn" type="button" role="tab" aria-selected="false">Closer</button>
      </div>

      <!-- Closer Login -->
      <div id="closerLogin" class="closer-login" aria-label="Closer login" style="display:none;">
        <div class="closer-grid">
          <div class="closer-field">
            <label class="closer-label" for="closerCode">Access code</label>
            <div class="closer-pin-wrap">
              <input id="closerCode" class="closer-input" type="password" autocomplete="current-password" placeholder="Enter your access code" />
              <button id="toggleCloserCode" type="button" class="pass-toggle" aria-label="Show code">
                <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
                  <path d="M2.5 12s3.5-7 9.5-7 9.5 7 9.5 7-3.5 7-9.5 7-9.5-7-9.5-7Z" stroke="currentColor" stroke-width="1.8"/>
                  <path d="M12 15.3a3.3 3.3 0 1 0 0-6.6 3.3 3.3 0 0 0 0 6.6Z" stroke="currentColor" stroke-width="1.8"/>
                </svg>
              </button>
            </div>
          </div>
        </div>
        <label class="remember-row">
          <input id="rememberCloser" type="checkbox" checked />
          <span>Remember me on this device</span>
        </label>
        <button id="closerContinue" class="lock-btn haptic" type="button">Continue</button>
      </div>

      <!-- Admin Login -->
      <div class="lock-row">
        <div class="lock-input-wrap">
          <input id="lockPass" class="lock-input" type="password" placeholder="Admin passcode" autocomplete="current-password" />
          <button id="togglePass" type="button" class="pass-toggle" aria-label="Show passcode">
            <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path d="M2.5 12s3.5-7 9.5-7 9.5 7 9.5 7-3.5 7-9.5 7-9.5-7-9.5-7Z" stroke="currentColor" stroke-width="1.8"/>
              <path d="M12 15.3a3.3 3.3 0 1 0 0-6.6 3.3 3.3 0 0 0 0 6.6Z" stroke="currentColor" stroke-width="1.8"/>
            </svg>
          </button>
        </div>
        <button id="lockBtn" class="lock-btn haptic">Unlock Dashboard</button>
      </div>

      <div class="lock-error" id="lockError">Incorrect passcode. Please try again.</div>
      <div class="caps-hint" id="capsHint">Caps Lock is enabled.</div>
    
      <div class="sb-privacy-wrap">
        <a class="sb-privacy-link" href="privacy.html" target="_blank" rel="noopener noreferrer">
          <span class="sb-privacy-brand">Switchboard</span>
          <span class="sb-privacy-policy">Privacy Policy</span>
        </a>
      </div>
</div>
  </div>

  <!-- Main Dashboard -->
  <div class="container">
    <!-- Premium Header Card -->
    <div class="header-card">
      <div class="header-content">
        <div class="brand-logo">
          <svg class="logo-svg" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
  <image x="0" y="0" width="24" height="24" preserveAspectRatio="xMidYMid meet" href="data:image/png;base64,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" />
</svg>
        </div>
        <div class="title-section">
          <div class="title-row">
            <h1>Switchboard</h1>
            
          </div>
          <p class="subtitle">Switchboard gives sales teams live visibility and clean handoffs.</p>
        </div>
        <div class="header-actions">

          <a id="wordleBtnDash" class="wordle-btn haptic" href="https://www.nytimes.com/games/wordle/index.html" target="_blank" rel="noopener noreferrer" aria-label="Open Wordle" title="Wordle">

            <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">

              <path d="M4.5 6.5h15v11h-15z" stroke="currentColor" stroke-width="1.8" stroke-linejoin="round"/>

              <path d="M9.5 6.5v11M14.5 6.5v11M4.5 10.5h15M4.5 13.5h15" stroke="currentColor" stroke-width="1.4" stroke-linecap="round"/>

            </svg>

          </a>

          <button id="logoutBtn" class="header-logout haptic" type="button" aria-label="Log out">
          <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M10 7V5.8C10 4.25 11.25 3 12.8 3H16.2C17.75 3 19 4.25 19 5.8V18.2C19 19.75 17.75 21 16.2 21H12.8C11.25 21 10 19.75 10 18.2V17" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
            <path d="M13 12H4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
            <path d="M6.5 9.5 4 12l2.5 2.5" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
        </div>
      </div>
    </div>

    <!-- Premium Tools Row -->
    <div class="tools-row">
      <div class="search-wrap">
        <div class="search-icon">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="11" cy="11" r="8"/>
            <path d="m21 21-4.35-4.35"/>
          </svg>
        </div>
        <input id="searchInput" class="search-input" type="search" placeholder="Search team members..." aria-label="Search closers" />
      </div>
      <button id="allOfflineBtn" class="all-offline-btn haptic" type="button" aria-label="Set all closers offline">Set All Offline</button>
    </div>

    <!-- Premium Closer Status Grid -->
    <div class="grid" id="grid" role="region" aria-label="Team status">
      <!-- Closer cards will be dynamically inserted here -->
    </div>

    <!-- Premium Broadcast Note Card -->
    <div class="note-card">
      <div class="note-header">
        <span class="note-title">Calling Instructions</span>
        <span class="note-hint">Shows in the Switchboard banner for all team members</span>
      </div>
      <textarea id="noteInput" rows="4" placeholder="Call your appointments and missed calls
Drops on the dialer
Hammer on
CID 720
Follow the script for best results" aria-label="Calling instructions"></textarea>
      <div class="note-actions">
        <button id="saveNoteBtn" class="note-btn haptic">Set Instructions</button>
        <button id="clearNoteBtn" class="note-btn haptic">Clear Instructions</button>
      </div>
    </div>

    <!-- Premium Theme Toggle Card -->
    <div class="theme-card">
      <span class="theme-label">Interface Theme</span>
      <label class="theme-switch" aria-label="Toggle theme">
        <input type="checkbox" id="themeToggle" checked />
        <span class="theme-slider"></span>
      </label>
    </div>

    <!-- Premium Toast Message -->
    <div id="message" role="alert" aria-live="polite">
      <span class="toast-icon">‚úÖ</span>
      <span class="toast-text"></span>
    </div>
  </div>

  <!-- Premium Confirmation Modal -->
  <div id="confirmOverlay" class="confirm-overlay" role="dialog" aria-modal="true" aria-labelledby="confirmTitle" aria-describedby="confirmMessage" aria-hidden="true">
    <div class="confirm-modal">
      <div class="confirm-title" id="confirmTitle">Confirm Action</div>
      <div id="confirmMessage" class="confirm-msg">Are you sure you want to proceed?</div>
      <div class="confirm-actions">
        <button id="confirmCancel" class="confirm-btn cancel haptic" type="button">Cancel</button>
        <button id="confirmOk" class="confirm-btn ok haptic" type="button">Confirm</button>
      </div>
    </div>
  </div>

  <script>

    const API_URL = "https://script.google.com/macros/s/AKfycbz7Vuhi44EFIrnndo0Si8pmh7mNREqlXK-2kNlYXg_DUPUpwmRI8N4_bC1TPqgYRMXzuQ/exec";

    

    // === MTH Security ===
    // Client-side passcode is only a convenience gate.
    // Real security must be enforced in your Apps Script (reject requests without the token).
    const MTH_ADMIN_TOKEN = "CHANGE_ME_TO_A_LONG_RANDOM_STRING";
    const MTH_LOCAL_PASSCODE = "7878!";
    const MTH_CLOSER_TOKEN = "CHANGE_ME_TO_A_LONG_RANDOM_STRING";

    // Closer login is based on extension + the suffix "pin" (example: 202pin).
    // This is client-side convenience only. Move validation to Apps Script for real security.
    const MTH_CLOSER_EXT_MAP = {
      "204": "Travis",
      "205": "Brian",
      "202": "Chase",
      "200": "Danny",
      "307": "Auri",
      "308": "Dave",
      "319": "Robbie"
    };


    // Closer codes (client-side starter). Move this to Apps Script later.
    // Format: "202pin": "Chase"
    let closers = [
      { name: "Travis", status: "offline" },
      { name: "Brian", status: "offline" },
      { name: "Chase", status: "offline" },
      { name: "Danny", status: "offline" },
      { name: "Auri", status: "offline" },
      { name: "Dave", status: "offline" },
      { name: "Robbie", status: "offline" }
    ];

    const grid = document.getElementById("grid");
    const message = document.getElementById("message");
    const noteInput = document.getElementById("noteInput");
    const saveNoteBtn = document.getElementById("saveNoteBtn");
    const clearNoteBtn = document.getElementById("clearNoteBtn");
    const themeToggle = document.getElementById("themeToggle");
    const headerCard = document.querySelector(".header-card");
    const searchInput = document.getElementById("searchInput");
    const allOfflineBtn = document.getElementById("allOfflineBtn");

    

    // === Lock screen ===
    const lockOverlay = document.getElementById("lockOverlay");
    const lockCard = document.querySelector(".lock-card");
    const lockPass = document.getElementById("lockPass");
    const lockBtn = document.getElementById("lockBtn");
    const lockError = document.getElementById("lockError");
    const capsHint = document.getElementById("capsHint");
    const lockSubEl = document.querySelector(".lock-sub");
    const togglePass = document.getElementById("togglePass");
    const logoutBtn = document.getElementById("logoutBtn");
    const roleAdminBtn = document.getElementById("roleAdmin");
    const roleCloserBtn = document.getElementById("roleCloser");

    const closerLogin = document.getElementById("closerLogin");
    const closerCode = document.getElementById("closerCode");
    const toggleCloserCode = document.getElementById("toggleCloserCode");
    const rememberCloser = document.getElementById("rememberCloser");
    const closerContinue = document.getElementById("closerContinue");

    // Loading overlay helpers (keeps "premium" transition and prevents stale flashes)
    const mthLoading = document.getElementById("mthLoading");
    const mthLoadingTitle = document.getElementById("mthLoadingTitle");
    const mthLoadingSub = document.getElementById("mthLoadingSub");

    function showAuthLoading(title, sub) {
      if (!mthLoading) return;
      if (mthLoadingTitle && title) mthLoadingTitle.textContent = title;
      if (mthLoadingSub && sub) mthLoadingSub.textContent = sub;
      mthLoading.classList.add("show");
      mthLoading.setAttribute("aria-hidden", "false");
    }
    function hideAuthLoading() {
      if (!mthLoading) return;
      mthLoading.classList.remove("show");
      mthLoading.setAttribute("aria-hidden", "true");
    }
    


    let activeRole = "admin";
    let allowedCloserName = "";

    // Session policy
    const MTH_UNLOCK_TTL_MS = 8 * 60 * 60 * 1000; // 8 hours
    const MTH_IDLE_LOCK_MS  = 15 * 60 * 1000;     // 15 minutes idle
    let idleTimer = null;


    function setLocked(locked) {
      if (locked) hideAuthLoading();
if (!lockOverlay) return;
      lockOverlay.style.display = locked ? "flex" : "none";
      document.body.style.overflow = locked ? "hidden" : "";
      if (locked) {
        if (lockError) lockError.style.display = "none";
        if (capsHint) capsHint.style.display = "none";
        if (lockPass) {
          lockPass.value = "";
          setTimeout(() => lockPass.focus(), 0);
        }
        // Clear closer access code so it never stays visible after sign-in
        if (closerCode) closerCode.value = "";
      }
    }

    function isUnlocked() {
      try {
        const until = Number(localStorage.getItem("mthAdminUnlockedUntil") || "0");
        return until && Date.now() < until;
      } catch (e) {
        return false;
      }
    }

    function setUnlockedSession() {
      try {
        localStorage.setItem("mthAdminUnlockedUntil", String(Date.now() + MTH_UNLOCK_TTL_MS));
      } catch (e) {}
    }

    function clearUnlockedSession() {
      try { localStorage.removeItem("mthAdminUnlockedUntil"); } catch (e) {}
    }

    
    function hardResetUI() {
      // Clear any last rendered UI immediately so switching accounts doesn't show stale data.
      // Keep it defensive, this file is used in different contexts.
      try { stopPolling(); } catch (e) {}
      try { mthLastStateSig = ""; } catch (e) {}
      try { mthHasLoadedOnce = false; } catch (e) {}
      try { if (typeof closers !== "undefined") closers = []; } catch (e) {}
      try { if (grid) grid.innerHTML = ""; } catch (e) {}
      try { if (noteInput) noteInput.value = ""; } catch (e) {}
      try { setLoadingSkeleton(true); } catch (e) {}
    }

function lockNow() {
      // Explicit logout: clear the unlock session AND any persisted role
      clearUnlockedSession();
      try {
        localStorage.removeItem("mthPersistRole");
        localStorage.removeItem("mthPersistAllowedCloser");
        localStorage.removeItem("mthCloserRemember");
      } catch (e) {}
      hardResetUI();
      stopPolling();
      stopIdleTimer();
      setLocked(true);
    }

    function unlockOk() {
      if (activeRole === "admin") {
        const val = (lockPass && lockPass.value ? lockPass.value : "").trim();
        if (!val) return false;
        return val === MTH_LOCAL_PASSCODE;
      }

      // Closer mode: access code (extension + "pin")
      const raw = (closerCode && closerCode.value ? closerCode.value : "").trim().toLowerCase();
      if (!raw) return false;

      const m = raw.match(/^(\d{3})pin$/);
      if (!m) return false;

      const ext = m[1];
      const nm = MTH_CLOSER_EXT_MAP[ext] || "";
      if (!nm) return false;

      allowedCloserName = nm;
      return true;
    }

    function shakeLockCard() {
      if (!lockCard) return;
      lockCard.classList.remove("is-shaking");
      void lockCard.offsetWidth;
      lockCard.classList.add("is-shaking");
      setTimeout(() => lockCard.classList.remove("is-shaking"), 450);
    }

    function startIdleTimer() {
      stopIdleTimer();
      idleTimer = setTimeout(() => lockNow(), MTH_IDLE_LOCK_MS);
    }

    function setRole(role) {
      activeRole = role === "closer" ? "closer" : "admin";
      try { document.body.classList.toggle("role-closer", activeRole === "closer"); } catch (e) {}
      if (roleAdminBtn) {
        const on = activeRole === "admin";
        roleAdminBtn.classList.toggle("is-active", on);
        roleAdminBtn.setAttribute("aria-selected", on ? "true" : "false");
      }
      if (roleCloserBtn) {
        const on = activeRole === "closer";
        roleCloserBtn.classList.toggle("is-active", on);
        roleCloserBtn.setAttribute("aria-selected", on ? "true" : "false");
      }
      // Reset input and hints
      if (lockPass) lockPass.value = "";
      if (lockError) lockError.style.display = "none";
      if (capsHint) capsHint.style.display = "none";
      allowedCloserName = "";
      if (lockSubEl) {
        lockSubEl.textContent = activeRole === "admin"
          ? "Enter Switchboard to manage status and calling instructions."
          : "Enter your access code to manage your status."}
      // Role hint in placeholder
      if (lockPass) {
        lockPass.placeholder = activeRole === "admin" ? "Admin passcode" : "Access code (e.g., 123pin)";
      }
      if (closerLogin) closerLogin.style.display = activeRole === "closer" ? "block" : "none";
      // Hide the single passcode input row when in closer mode
      const lockRow = document.querySelector(".lock-row");
      if (lockRow) lockRow.style.display = activeRole === "closer" ? "none" : "flex";
    }

    function stopIdleTimer() {
      if (idleTimer) {
        clearTimeout(idleTimer);
        idleTimer = null;
      }
    }
    function bumpIdleTimer() {
      if (!isUnlocked()) return;
      setUnlockedSession();
      startIdleTimer();
    }

    function tryUnlock() {
      // Validate first. Do not show any loading state unless the code is correct.
      const ok = unlockOk();
      if (!ok) {
        hideAuthLoading();
        if (lockError) lockError.style.display = "block";
        shakeLockCard();
        if (lockBtn) lockBtn.disabled = false;
        if (closerContinue) closerContinue.disabled = false;
        return;
      }

      showAuthLoading("Signing in", "Loading your dashboard‚Ä¶");
      if (lockBtn) lockBtn.disabled = true;
      if (closerContinue) closerContinue.disabled = true;

      // Persist unlock only for admin. Closers should never inherit admin unlock state.
      try {
        if (activeRole === "admin") {
          setUnlockedSession();
        } else {
          clearUnlockedSession();
        }
      } catch (e) {}

      // Apply role class before revealing the app UI
      try { document.body.classList.toggle("role-closer", activeRole === "closer"); } catch (e) {}

      setLocked(false);
      hardResetUI();

      // Clear any entered codes immediately after successful unlock
      if (closerCode) closerCode.value = "";
      if (lockPass) lockPass.value = "";
      if (lockBtn) lockBtn.disabled = false;
      if (closerContinue) closerContinue.disabled = false;

      // Always start at the top after unlocking
      try {
        window.scrollTo(0, 0);
        document.documentElement.scrollTop = 0;
        document.body.scrollTop = 0;
      } catch (e) {}

      try {
        sessionStorage.setItem("mthRole", activeRole);
        sessionStorage.setItem("mthAllowedCloser", allowedCloserName || "");
      } catch (e) {}
      try {
            if (activeRole === "closer") {
              if (rememberCloser && rememberCloser.checked) {
                localStorage.setItem("mthCloserRemember", "1");
                localStorage.setItem("mthPersistRole", "closer");
                localStorage.setItem("mthPersistAllowedCloser", allowedCloserName || "");
              } else {
                localStorage.removeItem("mthCloserRemember");
                localStorage.removeItem("mthPersistRole");
                localStorage.removeItem("mthPersistAllowedCloser");
              }
            } else {
              localStorage.removeItem("mthCloserRemember");
              localStorage.setItem("mthPersistRole", "admin");
              localStorage.removeItem("mthPersistAllowedCloser");
            }
          } catch (e) {}

      startPolling();
      startIdleTimer();
    }

    if (lockBtn) lockBtn.addEventListener("click", tryUnlock);
    if (closerContinue) closerContinue.addEventListener("click", tryUnlock);
    if (closerCode) {
      closerCode.addEventListener("input", () => { if (lockError) lockError.style.display = "none"; });
      closerCode.addEventListener("keydown", (e) => { if (e.key === "Enter") tryUnlock(); });
    }
    if (lockPass) {
      lockPass.addEventListener("keydown", (e) => {
        if (e.key === "Enter") tryUnlock();
      });
      lockPass.addEventListener("keyup", (e) => {
        const caps = e.getModifierState && e.getModifierState("CapsLock");
        if (capsHint) capsHint.style.display = caps ? "block" : "none";
      });
    }

    // Show/hide closer code
    if (toggleCloserCode && closerCode) {
      toggleCloserCode.addEventListener("click", () => {
        const hidden = closerCode.type === "password";
        closerCode.type = hidden ? "text" : "password";
        toggleCloserCode.setAttribute("aria-label", hidden ? "Hide code" : "Show code");
      });
    }

    // Show/hide passcode
    if (togglePass && lockPass) {
      togglePass.addEventListener("click", () => {
        const hidden = lockPass.type === "password";
        lockPass.type = hidden ? "text" : "password";
        togglePass.setAttribute("aria-label", hidden ? "Hide passcode" : "Show passcode");
        togglePass.innerHTML = hidden
          ? '<svg viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M3 12s3.5-7 9-7 9 7 9 7-3.5 7-9 7-9-7-9-7Z" stroke="currentColor" stroke-width="1.8"/><path d="M9.5 14.5 6 18" stroke="currentColor" stroke-width="1.8"/><path d="M14.5 9.5 18 6" stroke="currentColor" stroke-width="1.8"/><path d="M8 8l8 8" stroke="currentColor" stroke-width="1.8"/></svg>'
          : '<svg viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M2.5 12s3.5-7 9.5-7 9.5 7 9.5 7-3.5 7-9.5 7-9.5-7-9.5-7Z" stroke="currentColor" stroke-width="1.8"/><path d="M12 15.3a3.3 3.3 0 1 0 0-6.6 3.3 3.3 0 0 0 0 6.6Z" stroke="currentColor" stroke-width="1.8"/></svg>';
      });
    }

    // Auto-lock on activity tracking
    ["mousemove", "mousedown", "keydown", "scroll", "touchstart"].forEach(evt => {
      document.addEventListener(evt, bumpIdleTimer, { passive: true });
    });

    // Logout
    if (logoutBtn) logoutBtn.addEventListener("click", () => lockNow());

    // Init
    // Role switching
    if (roleAdminBtn) roleAdminBtn.addEventListener("click", () => setRole("admin"));
    if (roleCloserBtn) roleCloserBtn.addEventListener("click", () => setRole("closer"));

    (function initLock(){
      // If the session is still valid, keep the user signed in across refresh.
      // Only an explicit logout should force the sign-in screen.
      let restored = false;

      try {
        const unlocked = isUnlocked();

        if (unlocked) {
          const roleRaw = localStorage.getItem("mthPersistRole");
          if (!roleRaw) throw new Error("no persisted role");
          const role = (roleRaw || "admin").toLowerCase();
          const remembered = (localStorage.getItem("mthCloserRemember") === "1");
          const allowed = (localStorage.getItem("mthPersistAllowedCloser") || "");

          if (role === "closer") {
            // For closer, only restore if "remember me" was enabled and we have a valid closer name.
            if (remembered && allowed) {
              activeRole = "closer";
              allowedCloserName = allowed;
              setRole(activeRole);
              setLocked(false);
              hardResetUI();
              document.body.classList.toggle("role-closer", true);
              startPolling();
              startIdleTimer();
              restored = true;
            }
          } else {
            // Admin restore
            activeRole = "admin";
            allowedCloserName = "";
            setRole(activeRole);
            setLocked(false);
            hardResetUI();
            document.body.classList.toggle("role-closer", false);
            startPolling();
            startIdleTimer();
            restored = true;
          }
        }
      } catch (e) {}

      if (restored) return;

      // Default: locked on admin tab
      activeRole = "admin";
      allowedCloserName = "";
      setRole(activeRole);
      hardResetUI();
      setLocked(true);
      if (lockBtn) lockBtn.disabled = false;
    })();

    // UI helpers
    function setLoadingSkeleton(on) {
      if (!grid) return;
      if (on) {
        grid.innerHTML = "";
        for (let i = 0; i < 7; i++) {
          const sk = document.createElement("div");
          sk.className = "skeleton";
          grid.appendChild(sk);
        }
      }
    }

    function applyTheme() {
      if (!themeToggle) return;
      const useDark = !!themeToggle.checked;
      document.body.classList.toggle("dark", useDark);
      document.body.classList.toggle("light", !useDark);
    }

    // Load saved theme
    try {
      const saved = localStorage.getItem("mthTheme");
      if (saved === "light") themeToggle.checked = false;
      if (saved === "dark") themeToggle.checked = true;
    } catch (e) {}

    applyTheme();

    // Sticky header divider on scroll
    function syncHeaderScrollState() {
      if (!headerCard) return;
      const y = window.scrollY || document.documentElement.scrollTop || 0;
      headerCard.classList.toggle("is-scrolled", y > 6);
    }
    window.addEventListener("scroll", syncHeaderScrollState, { passive: true });
    syncHeaderScrollState();



    if (searchInput) {
      searchInput.addEventListener("input", () => renderRows());
    }

    if (themeToggle) {
      themeToggle.addEventListener("change", () => {
        setTimeout(() => {
          applyTheme();

    // Sticky header divider on scroll
    function syncHeaderScrollState() {
      if (!headerCard) return;
      const y = window.scrollY || document.documentElement.scrollTop || 0;
      headerCard.classList.toggle("is-scrolled", y > 6);
    }
    window.addEventListener("scroll", syncHeaderScrollState, { passive: true });
    syncHeaderScrollState();


          try {
            localStorage.setItem("mthTheme", themeToggle.checked ? "dark" : "light");
          } catch (e) {}
        }, 0);
      });
    }

    function showMessage(text, type = "success") {
      if (!message) return;
      message.textContent = text || "";
      message.className = "";
      message.classList.add(type === "success" ? "message--success" : "message--error");
      message.classList.add("message--show");
      
      setTimeout(() => {
        message.classList.remove("message--show");
      }, 2500);
    }

    function renderRows() {
      grid.innerHTML = "";
      const q = (searchInput && searchInput.value ? searchInput.value : "").trim().toLowerCase();
      const role = (function(){ try { return sessionStorage.getItem("mthRole") || "admin"; } catch(e){ return "admin"; } })();
      const onlyName = (function(){ try { return sessionStorage.getItem("mthAllowedCloser") || ""; } catch(e){ return ""; } })();
      let base = closers.map((c, i) => ({ c, i }));
      if (role === "closer" && onlyName) base = base.filter(x => (x.c.name || "") === onlyName);
      const list = q ? base.filter(x => (x.c.name || "").toLowerCase().includes(q)) : base;
      list.forEach(({ c: closer, i: index }) => {
        const card = document.createElement("div");
        card.className = "closer-card";
        card.style.animationDelay = `${index * 0.05}s`;

        const info = document.createElement("div");
        info.className = "closer-info";

        const indicator = document.createElement("div");
        indicator.className = `status-indicator ${closer.status}`;

        const details = document.createElement("div");
        details.className = "closer-details";

        const name = document.createElement("div");
        name.className = "closer-name";
        name.textContent = closer.name;

        const status = document.createElement("div");
        status.className = "closer-status";
        status.textContent = closer.status === "available" ? "Available to close" :
                          closer.status === "busy" ? "Currently busy" :
                          "Offline (not taking calls)";

        const updated = document.createElement("div");
        updated.className = "closer-updated";
        updated.textContent = closer.lastUpdated ? ("Updated " + closer.lastUpdated) : "";

        details.appendChild(name);
        details.appendChild(status);
        details.appendChild(updated);
        info.appendChild(indicator);
        info.appendChild(details);

        const buttons = document.createElement("div");
        buttons.className = "status-buttons";

        const btnAvail = document.createElement("button");
        btnAvail.className = "status-btn btn-available" + (closer.status === "available" ? " is-active" : "");
        btnAvail.textContent = "Available";
        btnAvail.setAttribute("aria-pressed", closer.status === "available" ? "true" : "false");
        btnAvail.onclick = () => updateStatus(index, "available", btnAvail);

        const btnBusy = document.createElement("button");
        btnBusy.className = "status-btn btn-busy" + (closer.status === "busy" ? " is-active" : "");
        btnBusy.textContent = "Busy";
        btnBusy.setAttribute("aria-pressed", closer.status === "busy" ? "true" : "false");
        btnBusy.onclick = () => updateStatus(index, "busy", btnBusy);

        const btnOffline = document.createElement("button");
        btnOffline.className = "status-btn btn-offline" + (closer.status === "offline" ? " is-active" : "");
        btnOffline.textContent = "Offline";
        btnOffline.setAttribute("aria-pressed", closer.status === "offline" ? "true" : "false");
        btnOffline.onclick = () => updateStatus(index, "offline", btnOffline);

        buttons.appendChild(btnAvail);
        buttons.appendChild(btnBusy);
        buttons.appendChild(btnOffline);

        card.appendChild(info);
        card.appendChild(buttons);
        grid.appendChild(card);
      });
    }

    
// ================================
// Live polling (no flashing)
// Polls backend, compares to last state, only updates DOM when data changes.
// ================================
const POLL_INTERVAL_MS = 5000;

let mthLastStateSig = "";
let mthPollTimer = null;
let mthPollInFlight = false;
let mthPollAbort = null;
let mthHasLoadedOnce = false;

function mthStableStringify(obj) {
  if (obj === null || obj === undefined) return "";
  if (typeof obj !== "object") return JSON.stringify(obj);
  if (Array.isArray(obj)) return "[" + obj.map(mthStableStringify).join(",") + "]";
  const keys = Object.keys(obj).sort();
  return "{" + keys.map(k => JSON.stringify(k) + ":" + mthStableStringify(obj[k])).join(",") + "}";
}

function mthComputeStateSig(rows, note) {
  const normRows = (Array.isArray(rows) ? rows : []).map(r => ({
    name: (r && r.name ? String(r.name) : ""),
    status: (r && r.status ? String(r.status) : "offline"),
    lastUpdated: (r && r.lastUpdated ? String(r.lastUpdated) : "")
  })).sort((a,b) => (a.name || "").localeCompare(b.name || ""));
  const payload = { rows: normRows, note: note ? String(note) : "" };
  return mthStableStringify(payload);
}

function stopPolling() {
  if (mthPollTimer) {
    clearInterval(mthPollTimer);
    mthPollTimer = null;
  }
  if (mthPollAbort) {
    try { mthPollAbort.abort(); } catch (e) {}
    mthPollAbort = null;
  }
  mthPollInFlight = false;
}

function startPolling() {
  stopPolling();
  // Run immediately, then on interval
  smartLoadFromSheet({ showSkeleton: !mthHasLoadedOnce, force: true });
  mthPollTimer = setInterval(() => {
    // If tab is hidden, skip to reduce churn and weird flashes on resume
    if (document.hidden) return;
    smartLoadFromSheet({ showSkeleton: false, force: false });
  }, POLL_INTERVAL_MS);
}

document.addEventListener("visibilitychange", () => {
  // Resume quickly when user comes back
  if (!document.hidden) {
    startPolling();
  }
});

    
async function smartLoadFromSheet(opts = {}) {
  const showSkeleton = !!opts.showSkeleton;
  const force = !!opts.force;

  // Prevent overlapping requests
  if (mthPollInFlight) return;

  if (showSkeleton) setLoadingSkeleton(true);

  mthPollInFlight = true;
  if (mthPollAbort) {
    try { mthPollAbort.abort(); } catch (e) {}
  }
  mthPollAbort = new AbortController();

  try {
    const [statusRes, noteRes] = await Promise.all([
      fetch(API_URL, { signal: mthPollAbort.signal }),
      fetch(API_URL + "?mode=notes", { signal: mthPollAbort.signal })
    ]);

    const statusData = await statusRes.json();
    const noteData = await noteRes.json();

    const rows = Array.isArray(statusData)
      ? statusData
      : (statusData.rows || []);

    const note = noteData && noteData.note ? noteData.note : "";

    const sig = mthComputeStateSig(rows, note);

    // No change, do nothing (prevents flashing)
    if (!force && sig === mthLastStateSig) {
      if (showSkeleton) setLoadingSkeleton(false);
    hideAuthLoading();
    mthHasLoadedOnce = true;
      return;
    }

    mthLastStateSig = sig;

    if (rows.length) {
      // refresh closer dropdown names
      try { populateCloserDropdown(); } catch(e) {}
      closers = rows.map(r => ({
        name: r.name,
        status: r.status || "offline",
        lastUpdated: r.lastUpdated || ""
      }));
    }

    // Only set noteInput if it is not focused (prevents overwriting while typing)
    if (noteInput) {
      const isTyping = document.activeElement === noteInput;
      if (!isTyping) noteInput.value = note || "";
    }

    renderRows();

    if (showSkeleton) setLoadingSkeleton(false);
    mthHasLoadedOnce = true;
  } catch (err) {
    // Abort is expected when we restart polling
    if (err && (err.name === "AbortError")) return;
    console.error(err);
    if (showSkeleton) setLoadingSkeleton(false);
    hideAuthLoading();
    // Do not clear the UI on failures, keep last known good state
    renderRows();
  } finally {
    mthPollInFlight = false;
  }
}

// Backwards compatibility for existing calls in the file
async function loadStatusesFromSheet() {
  return smartLoadFromSheet({ showSkeleton: !mthHasLoadedOnce, force: true });
}

    async function updateStatus(index, newStatus, btnEl) {
      const closer = closers[index];
      const buttons = btnEl ? btnEl.parentElement : null;

      // Inline saving state
      if (buttons) {
        Array.from(buttons.querySelectorAll(".status-btn")).forEach(b => {
          b.disabled = true;
          b.classList.add("is-saving");
        });
      } else if (btnEl) {
        btnEl.disabled = true;
        btnEl.classList.add("is-saving");
      }

      try {
        await fetch(API_URL, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ token: (function(){ try { return (sessionStorage.getItem("mthRole")||"admin")==="closer" ? MTH_CLOSER_TOKEN : MTH_ADMIN_TOKEN; } catch(e){ return MTH_ADMIN_TOKEN; } })(), name: closer.name, status: newStatus }),
          mode: "no-cors"
        });

        closers[index].status = newStatus;

        try {
          const now = new Date();
          const t = now.toLocaleTimeString([], { hour: "numeric", minute: "2-digit" });
          closers[index].lastUpdated = t;
        } catch (e) {}

        renderRows();

        // Inline success (on the clicked chip if we have it)
        if (btnEl) {
          btnEl.classList.add("inline-ok");
          setTimeout(() => btnEl.classList.remove("inline-ok"), 900);
        }
      } catch (err) {
        console.error(err);

        if (btnEl) {
          btnEl.classList.add("inline-err");
          setTimeout(() => btnEl.classList.remove("inline-err"), 1100);
        }

        // Global toast only for meaningful failures
        showMessage("Could not update " + closer.name + ". Try again.", "error");
      } finally {
        if (buttons) {
          Array.from(buttons.querySelectorAll(".status-btn")).forEach(b => {
            b.disabled = false;
            b.classList.remove("is-saving");
          });
        } else if (btnEl) {
          btnEl.disabled = false;
          btnEl.classList.remove("is-saving");
        }
      }
    }

    async function saveNote() {
      const text = noteInput.value || "";
      try {
        if (saveNoteBtn) {
          saveNoteBtn.disabled = true;
          saveNoteBtn.textContent = "Saving...";
        }

        await fetch(API_URL, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ token: MTH_ADMIN_TOKEN, note: text }),
          mode: "no-cors"
        });

        showMessage("Calling instructions saved.", "success");
      } catch (err) {
        console.error(err);
        showMessage("Could not save note. Try again.", "error");
      } finally {
        if (saveNoteBtn) {
          saveNoteBtn.disabled = false;
          saveNoteBtn.textContent = "Set Instructions";
        }
      }
    }

    async function clearNote() {
      try {
        if (clearNoteBtn) {
          clearNoteBtn.disabled = true;
          clearNoteBtn.textContent = "Clearing...";
        }

        await fetch(API_URL, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ token: MTH_ADMIN_TOKEN, note: "" }),
          mode: "no-cors"
        });

        if (noteInput) noteInput.value = "";
        showMessage("Calling instructions cleared.", "success");
      } catch (err) {
        console.error(err);
        showMessage("Could not clear note. Try again.", "error");
      } finally {
        if (clearNoteBtn) {
          clearNoteBtn.disabled = false;
          clearNoteBtn.textContent = "Clear Instructions";
        }
      }
    }



    function themedConfirm(msg){
return new Promise((resolve) => {
        const overlay = document.getElementById("confirmOverlay");
        const msgEl = document.getElementById("confirmMessage");
        const okBtn = document.getElementById("confirmOk");
        const cancelBtn = document.getElementById("confirmCancel");
        if (!overlay || !msgEl || !okBtn || !cancelBtn) {
          // Fallback
          return resolve(confirm(msg));
        }

        msgEl.textContent = msg;

        const cleanup = (val) => {
          overlay.classList.remove("show");
          overlay.setAttribute("aria-hidden", "true");
          okBtn.removeEventListener("click", onOk);
          cancelBtn.removeEventListener("click", onCancel);
          overlay.removeEventListener("click", onOverlay);
          document.removeEventListener("keydown", onKey);
          resolve(val);
        };

        const onOk = () => cleanup(true);
        const onCancel = () => cleanup(false);
        const onOverlay = (e) => { if (e.target === overlay) cleanup(false); };
        const onKey = (e) => {
          if (e.key === "Escape") cleanup(false);
          if (e.key === "Enter") cleanup(true);
        };

        okBtn.addEventListener("click", onOk);
        cancelBtn.addEventListener("click", onCancel);
        overlay.addEventListener("click", onOverlay);
        document.addEventListener("keydown", onKey);

        overlay.classList.add("show");
        overlay.setAttribute("aria-hidden", "false");
      });
    }

    async function setAllOffline() {
      if (!allOfflineBtn) return;
      const ok = await themedConfirm("Set all closers to Offline?");
      if (!ok) return;

      allOfflineBtn.disabled = true;
      const original = allOfflineBtn.textContent;
      allOfflineBtn.textContent = "Setting...";

      try {
        for (let i = 0; i < closers.length; i++) {
          if (closers[i].status === "offline") continue;
          await updateStatus(i, "offline", null);
        }
      } catch (e) {
        console.error(e);
        showMessage("Could not set all Offline. Try again.", "error");
      } finally {
        allOfflineBtn.disabled = false;
        allOfflineBtn.textContent = original;
      }
    }

    if (allOfflineBtn) allOfflineBtn.addEventListener("click", setAllOffline);

    if (saveNoteBtn) saveNoteBtn.addEventListener("click", saveNote);
    if (clearNoteBtn) clearNoteBtn.addEventListener("click", clearNote);
  
</script>
</body>
</html>